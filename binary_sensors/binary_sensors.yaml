- platform: template
  sensors:
    smoke_alarm:
#      entity_id: sensor.ecolink_firefighter_smoke_detector
      friendly_name: "Smoke Alarm"
      device_class: smoke
      value_template: "{{ is_state('sensor.ecolink_firefighter_smoke_detector', 'detected') }}"
    co_alarm:
#      entity_id: sensor.firefighter_carbon_monoxide_detector
      friendly_name: "CO Alarm"
      device_class: safety
      value_template: "{{ is_state('sensor.ecolink_firefighter_carbon_monoxide_detector', 'detected') }}"

- platform: template
  sensors:
    recycle:
      friendly_name: "Recycle"
      icon_template: >
        {{ state_attr('sensor.recycle', 'icon') }}
      value_template: >
        {{ state_attr('sensor.recycle', 'days') <= 1 and now().hour >= 18 }}
#        {% set e = strptime(
#             states.calendar.recycle.attributes.start_time,
#             '%Y-%m-%d %H:%M:%S') %}
#        {{ e.strftime('%j')|int - now().strftime('%j')|int == 1 and now().hour >= 12 }}
    trash:
      friendly_name: "Trash"
#      icon_template: >-
#        {% if is_state("binary_sensor.trash", "on") %}
#          mdi:delete
#        {% else %}
#          mdi:delete-outline
#        {% endif %}
      icon_template: >
        {{ state_attr('sensor.trash', 'icon') }}
      value_template: >
        {{ state_attr('sensor.trash', 'days') <= 1 and now().hour >= 18 }}
#        {% set e = strptime(
#             states.calendar.trash.attributes.start_time,
#             '%Y-%m-%d %H:%M:%S') %}
#        {{ e.strftime('%j')|int - now().strftime('%j')|int == 1 and now().hour >= 12 }}
    street_sweeping:
      friendly_name: "Street Sweeping"
      icon_template: >
        {{ state_attr('sensor.street_sweeping', 'icon') }}
      value_template: >
        {{ state_attr('sensor.street_sweeping', 'days') <= 1 and now().hour >= 18 }}

- platform: template
  sensors:
    washer_status:
        friendly_name: "Washer Cycle"
        value_template: "{{ states('sensor.washer_current_consumption')|float > 5 }}"
        icon_template: mdi:washing-machine
        delay_on:
          minutes: 5
        delay_off:
          minutes: 2
    dryer_status:
        friendly_name: "Dryer Cycle"
        value_template: "{{ states('sensor.dryer_current_consumption')|float > 5 }}"
        icon_template: mdi:tumble-dryer
        delay_on:
          minutes: 5
        delay_off:
          minutes: 1